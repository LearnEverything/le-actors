_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{Fm5r:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/VulcanUser",function(){return t("LpNT")}])},LpNT:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return O}));var n=t("vJKn"),s=t.n(n),r=t("xvhg"),u=t("rg98"),l=t("MX0m"),i=t.n(l),o=t("q1tI"),c=t.n(o),p=t("20a2"),d=t.n(p),m=t("v3sT"),x=t("TJry"),f=t("jPLn"),j=t("+LKd"),b=t("fIdO"),h=t("3FDQ"),v=t("Lu6H"),N=t("TZn1"),w=t("C5yf"),y=t("Oj1a"),g=t("oene"),k=t("RqI1"),T=t("jjmZ"),_=c.a.createElement;function O(){function e(){return(e=Object(u.a)(s.a.mark((function e(a){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t={email:a.currentTarget.email.value,password:a.currentTarget.password.value,isAdmin:a.currentTarget.isAdmin.checked||null,groups:a.currentTarget.groups.value||null},e.prev=2,e.next=5,fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:if(200===(n=e.sent).status){e.next=12;break}return e.t0=Error,e.next=10,n.text();case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:d.a.reload(),e.next=18;break;case 15:e.prev=15,e.t2=e.catch(2),console.error("An unexpected error happened occurred:",e.t2);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}Object(g.a)({redirectTo:"/login"});var a=Object(k.useMulti)({model:y.a}).documents||[],t=c.a.useState(""),n=Object(r.a)(t,2),l=n[0],o=n[1],p=a.find((function(e){return e._id===l})),O=Object(k.useUpdate)({model:y.a}),E=Object(r.a)(O,1)[0];function U(){return(U=Object(u.a)(s.a.mark((function e(a){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),l){e.next=3;break}throw new Error("Trying to update without userId, this shouldn't happen");case 3:return t={id:l,data:{email:a.currentTarget.updateEmail.value||p.email,username:a.currentTarget.updateUsername.value||null,isAdmin:a.currentTarget.updateIsAdmin.checked||null,groups:a.currentTarget.updateGroups.value||null}},e.next=6,E({input:t});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=Object(k.useDelete)({model:y.a}),S=Object(r.a)(A,1)[0],I=function(){var e=Object(u.a)(s.a.mark((function e(){var a,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}throw new Error("Trying to delete without id, this shouldn't happen");case 2:return a=l,o(""),t={id:a},e.next=7,S({input:t});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return _(w.a,null,_(m.a,{variant:"h1"}," Manage User"),_(m.a,{variant:"body1"},"/!\\ This page is an experimental demonstration of using Vulcan hooks (useCreate, useUpdate, useSingle, useMulti) to manage your model"),_(m.a,{variant:"h2"}," Create a new user "),_(m.a,{variant:"body1"},"/!\\ User creation is not yet safe for production! Do not use in real app!"),";",_("form",{onSubmit:function(a){return e.apply(this,arguments)},className:"jsx-670241919"},_("label",{className:"jsx-670241919"},_("span",{className:"jsx-670241919"},"Email"),_("input",{type:"text",name:"email",required:!0,className:"jsx-670241919"})),_("label",{className:"jsx-670241919"},_("span",{className:"jsx-670241919"},"Password"),_("input",{type:"password",name:"password",required:!0,className:"jsx-670241919"})),_("label",{className:"jsx-670241919"},_("span",{className:"jsx-670241919"},"isAdmin"),_("input",{type:"checkbox",name:"isAdmin",className:"jsx-670241919"})),_("label",{className:"jsx-670241919"},_("span",{className:"jsx-670241919"},"Groups"),_("input",{type:"text",name:"groups",className:"jsx-670241919"})),_("button",{type:"submit",className:"jsx-670241919"},"Submit")),_(m.a,{variant:"h2"}," Read "),_(x.a,null,a.map((function(e){return _(f.b,{key:e._id},_(T.a,{document:e,model:y.a}))}))),_("hr",{className:"jsx-670241919"}),_(m.a,{variant:"h2"}," ","Select an user for edition/deletion"," "),_(j.a,null,_(b.a,{id:"updateUserLabel"},"User"),_(h.a,{labelId:"updateUserLabel",id:"updatedUserSelectId",value:l,onChange:function(e){o(e.target.value)},style:{minWidth:"120px"}},_(v.a,{value:""},_("em",{className:"jsx-670241919"},"None")),a.map((function(e){return _(v.a,{key:e._id,value:e._id},e.email)})))),l&&_("div",{className:"jsx-670241919"},_(m.a,{variant:"h2"}," Update ",l," "),_("form",{onSubmit:function(e){return U.apply(this,arguments)},className:"jsx-670241919"},_("label",{className:"jsx-670241919"},_("span",{className:"jsx-670241919"},"New Email"),_("input",{type:"text",name:"updateEmail",defaultValue:null===p||void 0===p?void 0:p.email,className:"jsx-670241919"})),_("label",{className:"jsx-670241919"},_("span",{className:"jsx-670241919"},"Username"),_("input",{type:"text",name:"updateUsername",defaultValue:null===p||void 0===p?void 0:p.username,className:"jsx-670241919"})),_("label",{className:"jsx-670241919"},_("span",{className:"jsx-670241919"},"isAdmin"),_("input",{type:"checkbox",id:"updateIsAdmin",name:"updateIsAdmin",defaultChecked:null===p||void 0===p?void 0:p.isAdmin,className:"jsx-670241919"})),_("label",{className:"jsx-670241919"},_("span",{className:"jsx-670241919"},"Groups"),_("input",{type:"text",name:"updateGroups",defaultValue:null===p||void 0===p?void 0:p.groups,className:"jsx-670241919"})),_("button",{type:"submit",className:"jsx-670241919"},"Submit")),_(m.a,{variant:"h2"}," Delete operation"),_(N.a,{color:"secondary",onClick:function(){return I()}}," ","Delete user")),_(i.a,{id:"670241919"},["label.jsx-670241919{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}","label.jsx-670241919>span.jsx-670241919{font-weight:600;}","input.jsx-670241919{padding:6px;margin:0.3rem 0 0.6rem;}"]))}}},[["Fm5r",0,1,12,14,11,13,2,3,4,5,6,9,8,7,15,16,17,18,24]]]);